/*!
 * Countdown v0.1.0
 * https://github.com/fengyuanchen/countdown
 *
 * Copyright 2014 Fengyuan Chen
 * Released under the MIT license
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)}(function(d){var c=function(b,a){this.$element=d(b),this.defaults=d.extend({},c.defaults,this.$element.data(),d.isPlainObject(a)?a:{}),this.init()};c.prototype={constructor:c,init:function(){var f=this.$element.html(),e=new Date(this.defaults.date||f);e.getTime()&&(this.content=f,this.date=e,this.find(),this.defaults.autoStart&&this.start())},find:function(){var b=this.$element;this.$days=b.find("[data-days]"),this.$hours=b.find("[data-hours]"),this.$minutes=b.find("[data-minutes]"),this.$seconds=b.find("[data-seconds]"),this.$days.length+this.$hours.length+this.$minutes.length+this.$seconds.length>0&&(this.found=!0)},reset:function(){this.found?(this.output("days"),this.output("hours"),this.output("minutes"),this.output("seconds")):this.output()},ready:function(){var j,i=this.date,p=100,o=1000,n=60000,m=3600000,l=86400000,k={};return i?(j=i.getTime()-(new Date).getTime(),0>=j?(this.end(),!1):(k.days=j,k.hours=k.days%l,k.minutes=k.hours%m,k.seconds=k.minutes%n,k.milliseconds=k.seconds%o,this.days=Math.floor(k.days/l),this.hours=Math.floor(k.hours/m),this.minutes=Math.floor(k.minutes/n),this.seconds=Math.floor(k.seconds/o),this.deciseconds=Math.floor(k.milliseconds/p),!0)):!1},start:function(){!this.active&&this.ready()&&(this.active=!0,this.reset(),this.autoUpdate=this.defaults.fast?setInterval(d.proxy(this.fastUpdate,this),100):setInterval(d.proxy(this.update,this),1000))},stop:function(){this.active&&(this.active=!1,clearInterval(this.autoUpdate))},end:function(){this.date&&(this.stop(),this.days=0,this.hours=0,this.minutes=0,this.seconds=0,this.deciseconds=0,this.reset(),this.defaults.end())},destroy:function(){this.date&&(this.stop(),this.$days=null,this.$hours=null,this.$minutes=null,this.$seconds=null,this.$element.empty().html(this.content),this.$element.removeData("countdown"))},fastUpdate:function(){--this.deciseconds>=0?this.output("deciseconds"):(this.deciseconds=9,this.update())},update:function(){--this.seconds>=0?this.output("seconds"):(this.seconds=59,--this.minutes>=0?this.output("minutes"):(this.minutes=59,--this.hours>=0?this.output("hours"):(this.hours=23,--this.days>=0?this.output("days"):this.end())))},output:function(b){if(!this.found){return void this.$element.empty().html(this.template())}switch(b){case"deciseconds":this.$seconds.text(this.getSecondsText());break;case"seconds":this.$seconds.text(this.seconds);break;case"minutes":this.$minutes.text(this.minutes);break;case"hours":this.$hours.text(this.hours);break;case"days":this.$days.text(this.days)}},template:function(){return this.defaults.text.replace("%s",this.days).replace("%s",this.hours).replace("%s",this.minutes).replace("%s",this.getSecondsText())},getSecondsText:function(){return this.active&&this.defaults.fast?this.seconds+"."+this.deciseconds:this.seconds}},c.defaults={autoStart:!0,date:null,fast:!1,end:d.noop,text:"%s days, %s hours, %s minutes, %s seconds"},c.setDefaults=function(a){d.extend(c.defaults,a)},d.fn.countdown=function(a){return this.each(function(){var f=d(this),b=f.data("countdown");b||f.data("countdown",b=new c(this,a)),"string"==typeof a&&d.isFunction(b[a])&&b[a]()})},d.fn.countdown.constructor=c,d.fn.countdown.setDefaults=c.setDefaults,d(function(){d("[countdown]").countdown()})});